function shoppingCart_getTopPos(a){for(var b=a.offsetTop;null!=(a=a.offsetParent);)"HTML"!=a.tagName&&(b+=a.offsetTop);return b}function shoppingCart_getLeftPos(a){for(var b=a.offsetLeft;null!=(a=a.offsetParent);)"HTML"!=a.tagName&&(b+=a.offsetLeft);return b}function addToBasket(a){shopping_cart_div||(shopping_cart_div=document.getElementById("shopping_cart")),flyingDiv||(flyingDiv=document.createElement("DIV"),flyingDiv.style.position="absolute",document.body.appendChild(flyingDiv)),shopping_cart_x=shoppingCart_getLeftPos(shopping_cart_div),shopping_cart_y=shoppingCart_getTopPos(shopping_cart_div),currentProductDiv=document.getElementById("slidingProduct"+a),currentXPos=shoppingCart_getLeftPos(currentProductDiv),currentYPos=shoppingCart_getTopPos(currentProductDiv),diffX=shopping_cart_x-currentXPos,diffY=shopping_cart_y-currentYPos,button_content=document.getElementById("addToBasketButton"+a).innerHTML,document.getElementById("addToBasketButton"+a).innerHTML="<b><u>"+added_to_cart()+"</u></b>",setTimeout(function(){return_addtocart_button(a,button_content)},2e3);var b=currentProductDiv.cloneNode(!0);b.id="",flyingDiv.innerHTML="",flyingDiv.style.left=currentXPos+"px",flyingDiv.style.top=currentYPos+"px",flyingDiv.appendChild(b),flyingDiv.style.display="block",flyingDiv.style.width=currentProductDiv.offsetWidth+"px",flyToBasket(a)}function return_addtocart_button(a,b){document.getElementById("addToBasketButton"+a).innerHTML=b}function remove_added(a){document.getElementById("addToBasketButton"+a).innerHTML="<div id='addToBasketButton"+a+"'><a href='javascript:void(0)' onclick=\"addToBasket("+a+');return false">'+AfterAddedToCart()+"</a></div>"}function flyToBasket(a){var b=Math.max(Math.abs(diffX),Math.abs(diffY)),c=diffX/b*flyingSpeed,d=diffY/b*flyingSpeed;currentXPos+=c,currentYPos+=d,flyingDiv.style.left=Math.round(currentXPos)+"px",flyingDiv.style.top=Math.round(currentYPos)+"px",c>0&&currentXPos>shopping_cart_x&&(flyingDiv.style.display="none"),c<0&&currentXPos<shopping_cart_x&&(flyingDiv.style.display="none"),"block"==flyingDiv.style.display?setTimeout('flyToBasket("'+a+'")',10):ajaxAddProduct(a)}function showAjaxBasketContent(a){var b=document.getElementById("shopping_cart_items"),c=ajaxObjects[a].response.split("|||");if(document.getElementById("shopping_cart_items_product"+c[0])){var d=document.getElementById("shopping_cart_items_product"+c[0]),e=d.cells[0].innerHTML/1;e+=1,d.cells[0].innerHTML=e}else{var f=b.insertRow(-1);f.id="shopping_cart_items_product"+c[0];var g=f.insertCell(-1);g.innerHTML="1";var g=f.insertCell(-1);g.innerHTML=c[1];var g=f.insertCell(-1);g.style.textAlign="right",g.innerHTML=c[2];var g=f.insertCell(-1),h=document.createElement("A");g.appendChild(h),h.href="javascript:void(0)",h.title="מחיקה",h.onclick=function(){removeProductFromBasket(c[0])};var i=document.createElement("IMG");i.src="http://ilbiz.co.il/ClientSite/other/sym_img/remove.gif",h.appendChild(i)}updateTotalPrice(),ajaxObjects[a]=!1}function updateTotalPrice(){var a=document.getElementById("shopping_cart_items"),b=0;if(document.getElementById("shopping_cart_totalprice")){for(var c=1;c<a.rows.length;c++)b+=a.rows[c].cells[0].innerHTML.replace(/[^0-9]/g)*a.rows[c].cells[2].innerHTML;document.getElementById("shopping_cart_totalprice").innerHTML=txt_totalPrice+b.toFixed(2)+" "+txt_COIN_type}open_cart()}function removeProductFromBasket(a){var b=document.getElementById("shopping_cart_items_product"+a),c=b.cells[0];"1"==c.innerHTML?b.parentNode.removeChild(b):c.innerHTML=c.innerHTML/1-1,updateTotalPrice(),ajaxRemoveProduct(a)}function ajaxValidateRemovedProduct(a){"OK"!=ajaxObjects[a].response&&alert("Error while removing product from the database")}function ajaxRemoveProduct(a){var b=ajaxObjects.length;ajaxObjects[b]=new sack,ajaxObjects[b].requestFile=url_removeProductFromBasket,ajaxObjects[b].setVar("productIdToRemove",a),ajaxObjects[b].onCompletion=function(){ajaxValidateRemovedProduct(b)},ajaxObjects[b].runAJAX()}function ajaxAddProduct(a){var b=ajaxObjects.length;ajaxObjects[b]=new sack,ajaxObjects[b].requestFile=url_addProductToBasket,ajaxObjects[b].setVar("productId",a),ajaxObjects[b].onCompletion=function(){showAjaxBasketContent(b)},ajaxObjects[b].runAJAX()}function open_cart(){jQuery(function(a){"close"==a("#shopping_cart_header").attr("rel")&&a("#shopping_cart_header").click()})}var flyingSpeed=25,url_addProductToBasket="index.php",url_removeProductFromBasket="index.php",txt_totalPrice=get_word_txt_totalPrice(),txt_COIN_type=get_word_COIN_type(),shopping_cart_div=!1,flyingDiv=!1,currentProductDiv=!1,shopping_cart_x=!1,shopping_cart_y=!1,slide_xFactor=!1,slide_yFactor=!1,diffX=!1,diffY=!1,currentXPos=!1,currentYPos=!1,ajaxObjects=new Array;jQuery(function(a){a("#shopping_cart_header").click(function(){"close"==a(this).attr("rel")?(a(this).attr("rel","open"),a(".hidden-cart-part").show()):(a(this).attr("rel","close"),a(".hidden-cart-part").hide())})});